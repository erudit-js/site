import{e as p,b as m,c as l}from"./jTRQ5ZsA.js";import{m as y,p as f}from"./CiBNX5Fz.js";async function h(i){if(i.type!==y.Link)return;const{linkTarget:r}=i;if(r.type!=="unique")return;const t=await $fetch(`/api/preview/unique/${p(r._absoluteStrLocation)}`,{responseType:"json"}),e=t.bitran.productName,o=t.productTitle,s=await m(e),c=await(async()=>{const n=await l(e);try{return n("_element_title")}catch{return e}})();let a=t.context.filter(n=>!n.hidden).map(n=>n.title).join(" / ");a+=o?(a?" â€¢ ":"")+c:"";const u=o||c||e;return{type:f.Unique,productName:e,bitran:{context:t.bitran.context,content:t.bitran.content},footer:{iconSvg:s,primary:u,secondary:a,href:r._href}}}export{h as buildUnique};
