import{f as P,c as v,o as c,n as d,a as T,k as _,J as Y,K as Z,_ as I,F as U,r as N,b as k,w as B,d as E,M as S,t as C,y as K,v as h,L as R,N as H,g as J,O as j,Q as O,R as L,S as x,x as F,D as ee,h as Q,z as W,e as te,G as ne,T as X,B as V,U as se,V as oe,j as ae,W as z,u as ie,A as re,X as ce,Y as q,Z as le,i as A,$ as pe}from"./CiBNX5Fz.js";import{u as ue}from"./DXezGLjV.js";import{u as de,a as _e,s as me,b as ve}from"./7EQBSnv5.js";const fe=["src"],ge=P({__name:"ContentDecoration",props:{decoration:{}},setup(i){const e=Y();return(s,o)=>(c(),v("div",{class:d(s.$style.contentDecoration)},[T("img",{src:_(e)(("contentAsset"in s?s.contentAsset:_(Z))(s.decoration))},null,8,fe)],2))}}),ye="_contentDecoration_1catu_1",$e={contentDecoration:ye},be={$style:$e},tt=Object.assign(I(ge,[["__cssModules",be]]),{__name:"MainUtilsContentDecoration"}),we=P({__name:"Breadcrumb",props:{context:{}},setup(i){const e=K({prefetch:!1});function s(o){return o}return(o,a)=>{const u=S;return c(),v("section",{class:d(o.$style.breadcrumb)},[(c(!0),v(U,null,N(o.context.slice(0,-1),p=>(c(),v(U,null,[k(_(e),{to:p.href,class:d(o.$style.breadcrumbItem)},{default:B(()=>[k(u,{name:p.icon,wrapper:"span"},null,8,["name"]),E(" "+C(p.title),1)]),_:2},1032,["to","class"]),k(u,{class:d(o.$style.sep),name:"angle-right"},null,8,["class"])],64))),256))],2)}}}),he="_breadcrumb_1e1w1_1",Me="_breadcrumbItem_1e1w1_19",Ce="_sep_1e1w1_34",Te={breadcrumb:he,breadcrumbItem:Me,sep:Ce},ke={$style:Te},nt=Object.assign(I(we,[["__cssModules",ke]]),{__name:"MainUtilsBreadcrumb"}),Pe=P({__name:"ContentTitle",props:{icon:{},title:{},hint:{}},setup(i){return(e,s)=>{const o=S,a=H;return c(),v("section",{class:d(e.$style.contentTitle)},[_(R)(e.icon)?(c(),h(o,{key:0,name:e.icon,title:e.hint},null,8,["name","title"])):(c(),h(a,{key:1,name:"content-title-icon",svg:e.icon,title:e.hint},null,8,["svg","title"])),T("h1",null,C(e.title),1)],2)}}}),Ie="_contentTitle_p3ocd_1",De={contentTitle:Ie},Ue={$style:De},st=Object.assign(I(Pe,[["__cssModules",Ue]]),{__name:"MainUtilsContentTitle"}),Be=P({__name:"ContentDescription",props:{description:{}},async setup(i){let e,s;const o=([e,s]=J(()=>ue()),e=await e,s(),e);return(a,u)=>(c(),v("section",{class:d(a.$style.contentDescription)},C(_(o)(a.description)),3))}}),Oe="_contentDescription_x6dlr_1",Fe={contentDescription:Oe},Se={$style:Fe},ot=Object.assign(I(Be,[["__cssModules",Se]]),{__name:"MainUtilsContentDescription"}),je={key:2},Le=400,Ae=100,Ne=P({__name:"ContentPopover",props:{data:{}},setup(i){const e=j("reference"),s=j("popover"),o=j("popover-arrow"),{floatingStyles:a,middlewareData:u}=de(e,s,{whileElementsMounted:_e,middleware:[me({boundary:(document==null?void 0:document.querySelector("[erudit-main]"))||void 0}),ve({element:o})]}),p=O(!1);let f,t;function y(n){clearTimeout(t),clearTimeout(f),n?p.value=!0:f=setTimeout(()=>{p.value=!0},Le)}function b(){clearTimeout(f),t=setTimeout(()=>{p.value=!1},Ae)}return(n,l)=>{const r=S,m=H,$=x;return c(),v("div",{ref:"reference",class:d(n.$style.reference),style:L(`--popoverColor: ${n.data.color}`),onMouseenter:l[0]||(l[0]=()=>y()),onMouseleave:b,onClick:l[1]||(l[1]=()=>y(!0))},[_(R)(n.data.icon)?(c(),h(r,{key:0,name:n.data.icon},null,8,["name"])):(c(),h(m,{key:1,name:"popover-icon",svg:n.data.icon},null,8,["svg"])),E(" "+C(n.data.title)+" ",1),k($,null,{default:B(()=>{var g,w;return[_(p)?(c(),v("div",{key:0,ref:"popover",class:d(n.$style.popover),style:L(_(a))},[T("div",{ref:"popover-arrow",class:d(n.$style.arrow),style:L({position:"absolute",top:((g=_(u).arrow)==null?void 0:g.y)!=null?`${_(u).arrow.y}px`:"",left:((w=_(u).arrow)==null?void 0:w.x)!=null?`${_(u).arrow.x}px`:""})},null,6),T("div",{class:d(n.$style.inner)},[_(R)(n.data.icon)?(c(),h(r,{key:0,class:d(n.$style.floatIcon),name:n.data.icon},null,8,["class","name"])):(c(),h(m,{key:1,class:d(n.$style.floatIcon),name:"popover-icon",svg:n.data.icon},null,8,["class","svg"])),T("div",{class:d(n.$style.title)},C(n.data.title),3),n.data.description?(c(),v("div",je,C(n.data.description),1)):F("",!0),ee(n.$slots,"default")],2)],6)):F("",!0)]}),_:3})],38)}}}),Re="_reference_ouigi_1",Ve="_popover_ouigi_21",Ee="_arrow_ouigi_31",ze="_inner_ouigi_40",qe="_floatIcon_ouigi_50",Ge="_title_ouigi_56",He={reference:Re,popover:Ve,arrow:Ee,inner:ze,floatIcon:qe,title:Ge},Je={$style:He},G=Object.assign(I(Ne,[["__cssModules",Je]]),{__name:"MainUtilsContentPopover"}),Qe=P({__name:"ContentPopovers",props:{generic:{}},async setup(i){let e,s;const o=i,a=([e,s]=J(()=>Q("flag_dev","flag_dev_description","flag_advanced","flag_advanced_description","flag_secondary","flag_secondary_description","popover_dependencies","popover_dependencies_description")),e=await e,s(),e),u={dev:{icon:"construction",color:"var(--warn)",title:a.flag_dev,description:a.flag_dev_description},advanced:{icon:"asterisk",color:"#7c67ac",title:a.flag_advanced,description:a.flag_advanced_description},secondary:{icon:"puzzle",color:"#7faf35",title:a.flag_secondary,description:a.flag_secondary_description}},p={icon:"shuffle",color:"#47baa9",title:a.popover_dependencies,description:a.popover_dependencies_description},f=W(()=>{var t,y,b;return!!((t=o.generic)!=null&&t.flags&&((y=Object.keys(o.generic.flags))!=null&&y.length)||(b=o.generic)!=null&&b.dependencies)});return(t,y)=>{var l;const b=S,n=te;return _(f)?(c(),v("section",{key:0,class:d(t.$style.popovers)},[(c(!0),v(U,null,N(Object.keys(t.generic.flags),r=>(c(),h(G,{data:u[r]},null,8,["data"]))),256)),(l=t.generic)!=null&&l.dependencies?(c(),h(G,{key:0,data:p},{default:B(()=>[T("ul",{class:d(t.$style.dependenciesList)},[(c(!0),v(U,null,N(t.generic.dependencies,(r,m)=>(c(),v("li",null,[k(b,{name:"arrow-left",wrapper:"span"}),k(n,{prefetch:!1,to:m},{default:B(()=>[E(C(r),1)]),_:2},1032,["to"])]))),256))],2)]),_:1})):F("",!0)],2)):F("",!0)}}}),We="_popovers_1wpsg_1",Xe="_dependenciesList_1wpsg_8",Ye={popovers:We,dependenciesList:Xe},Ze={$style:Ye},at=Object.assign(I(Qe,[["__cssModules",Ze]]),{__name:"MainUtilsContentPopovers"});function it(){var p,f;const i=ne(),e=X(),s="content-data",o=(f=i.static.data)[s]||(f[s]=(p=i.payload.data)[s]||(p[s]={})),a=O();let u;return V(()=>{u=(async()=>{if(!e.value){a.value=void 0;return}const t=e.value.contentId,y=o[t]||(o[t]=await $fetch("/api/content/data",{query:{contentId:t}}));return a.value=y,a})()}),u}function rt(i){const e=X(),s=se(),o=oe(),a=Q("article","summary","practice","site_info_title","seo_article_description","seo_summary_description","seo_practice_description"),u=()=>{setTimeout(()=>{const l=(()=>{var r,m,$;switch((r=e.value)==null?void 0:r.type){case"topic":const g=e.value.topicPart;return(($=(m=A.site)==null?void 0:m.favicon)==null?void 0:$[g])||pe(`favicon/${g}.svg`)}return q})();o.value=l},500)};let p,f;const t={title:O(),description:O()},y=()=>{p=(async()=>{var m,$,g,w,D;const l=await a;let r="";if(r+=(($=(m=i.value.generic)==null?void 0:m.seo)==null?void 0:$.title)||i.value.generic.title||i.value.generic.contentId.split("/").pop(),i.value.type!=="book"){const M=(g=i.value)==null?void 0:g.bookTitle;r+=M?` | ${M}`:""}if(e.value.type==="topic"){const M=e.value.topicPart;M!=="article"&&(r+=` | ${l[M]}`)}r+=" - "+(((w=A.seo)==null?void 0:w.title)||((D=A.site)==null?void 0:D.title)||l.site_info_title),t.title.value=r})()},b=()=>{f=(async()=>{var m,$,g,w,D;const l=await a,r=(($=(m=i.value.generic)==null?void 0:m.seo)==null?void 0:$.description)||((g=i.value.generic)==null?void 0:g.description);if(r){t.description.value=r;return}if(e.value.type==="topic"){const M=l[`seo_${e.value.topicPart}_description`];t.description.value=M(((D=(w=i.value.generic)==null?void 0:w.seo)==null?void 0:D.title)||i.value.generic.title);return}t.description.value=""})()};ae({title:t.title,ogTitle:t.title,description:t.description,ogDescription:t.description});const n=W(()=>{var l,r;return[...z(s,le),...(l=i.value.generic)!=null&&l.ogImage?z(s,(r=i.value.generic)==null?void 0:r.ogImage):[]]});return ie({meta:n}),V(()=>{y(),b()}),re(()=>{V(()=>{u()})}),ce(()=>{o.value=q}),Promise.all([p,f])}export{nt as B,tt as C,rt as a,st as b,ot as c,at as d,it as u};
