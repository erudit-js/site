import{j as G,p as H,k as V,m as W,B as L,I as P,n as q,o as S,q as O,P as z,T as Q,E as U,G as J}from"./jTRQ5ZsA.js";import{a as K,c as X,d as Y,e as Z,f as ee}from"./TO1_kQR6.js";import{e as I,u as w}from"./BPgHF7zz.js";import{f as p,c as d,o as s,F as ne,r as re,v as i,n as y,_ as $,w as h,D as oe,ax as te,g as b,a as E,b as k,x as T,k as r,O as se,Q as M,A as x,t as F,aq as ae,ay as ce,as as ie}from"./CiBNX5Fz.js";function v(){I();const e=w().name,t={...K(),[W]:H,[V]:G}[e];if(!t)throw new Error(`Failed to find renderer for element "${e}"!`);return t}async function A(){I();const o=w();if(o instanceof L||o instanceof P)return{error:o.error};const e=v();try{return o.renderData=await de(),{ElementComponent:await e.component()}}catch(n){return{error:n instanceof Error?n:new Error(String(n))}}}async function de(){const o=w(),e=X(),t=v().renderDataGenerator,a=await q({node:o,storage:e.renderDataStorage,generator:t});if(a){if(a.type==="error")throw new Error(a.message);return a.data}}const le=p({__name:"RenderGroup",props:{node:{}},setup(o){return(e,n)=>(s(!0),d(ne,null,re(e.node.children??[],t=>(s(),i(Te,{node:t},null,8,["node"]))),256))}}),D=p({__name:"BlockFloat",props:{position:{}},setup(o){return(e,n)=>(s(),d("div",{class:y({"bitran-blockFloat":!0,[`bitran-blockFloat--${e.position}`]:!0})},null,2))}}),ue={};function _e(o,e){return s(),i(te,{name:"bitran-transition--fade"},{default:h(()=>[oe(o.$slots,"default")]),_:3})}const pe=$(ue,[["render",_e]]),me={class:"bitran-blockAside"},fe={class:"bitran-blockAsideInner"},ve=["innerHTML"],he=p({__name:"BlockAside",props:{node:{},hovered:{type:Boolean},error:{}},async setup(o){let e,n;const t=v(),a=([e,n]=b(()=>S(t)),e=await e,n(),e);return(c,l)=>(s(),d("div",me,[E("div",fe,[k(pe,null,{default:h(()=>[c.hovered||c.error?(s(),d("div",{key:0,class:"bitran-blockAsideIcon",innerHTML:r(a)},null,8,ve)):T("",!0)]),_:1})])]))}}),ke=["id"],be={key:1,class:"bitran-block"},ye={class:"bitran-blockMain"},Ee={key:0},ge=p({__name:"Block",props:{node:{}},async setup(o){let e,n;const t=o,a=v(),c=se("block"),l=M(!1),m=(()=>{if(!(t.node instanceof L))return""+t.node.id})(),{ElementComponent:f,error:u}=([e,n]=b(()=>A()),e=await e,n(),e);return x(()=>{c.value.addEventListener("mouseenter",()=>{l.value=!0}),c.value.addEventListener("mouseleave",()=>{l.value=!1})}),(_,g)=>(s(),d("div",{ref:"block",id:r(m),class:y({"bitran-blockContainer":!0,"bitran-blockContainer--hover":l.value,"bitran-error":r(u)})},[k(D,{position:"above"}),r(a).customLayout&&!r(u)?(s(),i(r(f),{key:0,node:_.node},null,8,["node"])):(s(),d("div",be,[k(he,{node:_.node,hovered:l.value,error:r(u)},null,8,["node","hovered","error"]),E("div",ye,[r(u)?(s(),d("div",Ee,F(r(u)),1)):(s(),i(r(f),{key:1,node:_.node,class:y(_.node.meta.classes)},null,8,["node","class"]))])])),k(D,{position:"below"})],10,ke))}}),we={};function $e(o,e){return s(),d("div",null,"Block loading...")}const Re=$(we,[["render",$e]]),Ce={key:0,class:y({"bitran-inliner":!0,"bitran-error":!0})},Ne=["innerHTML"],Be=p({__name:"Inliner",props:{node:{}},async setup(o){let e,n;const{ElementComponent:t,error:a}=([e,n]=b(()=>A()),e=await e,n(),e),c=v(),l=([e,n]=b(()=>S(c)),e=await e,n(),e);return(m,f)=>r(a)?(s(),d("span",Ce,[E("span",{class:"bitran-inlinerErrorIcon",innerHTML:r(l)},null,8,Ne),E("span",null,F(r(a)),1)])):(s(),i(r(t),{key:1,node:m.node},null,8,["node"]))}}),De={};function Le(o,e){return s(),d("span",null,"Inliner loading...")}const Se=$(De,[["render",Le]]),Ie=p({__name:"RenderElement",props:{node:{}},async setup(o){let e,n;const t=o,a=t.node instanceof O,c=Y(),l=Z(),m=ee(),f=v(),u=m.value?"client":t.node instanceof z||t.node instanceof Q||f.ssr?"hybrid":"client",_=B=>ae(B,{node:t.node}),g=_(a?ge:Be),j=_(a?Re:Se);let R=!0;const C=f.canRender;!m.value&&C&&(R=([e,n]=b(()=>C({isDev:c.isDev,isProd:c.isDev===void 0?void 0:!c.isDev,isServer:c.isServer,isClient:c.isServer===void 0?void 0:!c.isServer,node:t.node})),e=await e,n(),e));const N=M(!1);return x(()=>setTimeout(()=>N.value=!0,500)),(B,Me)=>r(R)?(s(),i(r(l),{key:0,mode:r(u)},{default:h(()=>[r(u)==="hybrid"?(s(),i(r(g),{key:0})):(s(),i(ce,{key:1},{fallback:h(()=>[N.value?(s(),i(r(j),{key:0})):(s(),i(ie(a?"div":"span"),{key:1}))]),default:h(()=>[k(r(g))]),_:1}))]),_:1},8,["mode"])):T("",!0)}}),Te=p({__name:"Render",props:{node:{}},setup(o){const e=o,n=(()=>{switch(!0){case e.node instanceof J:return le;case e.node instanceof U:return Ie;default:throw new Error(`Unsupported node "${e.node.constructor.name}"!`)}})();return(t,a)=>(s(),i(r(n),{node:t.node},null,8,["node"]))}});export{Te as _,v as u};
